<!doctype html>
<html>
<head>
    <link rel="stylesheet" href="styles.css">
    <title>image board</title>
</head>
<body>
    <div class="main">

        <h1>latest images</h1>

        <form class="form" action="index.html" method="post">
            <input v-model = "title" type="text" name="title" placeholder="title"/>
            <input v-model = "description" type="text" name="description" placeholder="description"/>
            <input v-model = "username" type="text" name="username" placeholder="username"/>
            <input type="file" name="file" accept="image/*" @change="handleChange"/>
            <button @click.prevent.default="handleClick" type="button" name="button">submit</button>
        </form>

        <div class="grid-container">
            <div class="images-container">
                <div class="image" v-for ="image in images">
                        <img :src="image.url" alt="image" @click="clicked">
                    <p>{{image.title}}</p>
                </div>
            </div>
        </div>

        <div>
            <modal v-if="showModal" :id="showModal" @close="showModal=false"></modal>
        </div>
    </div>

    <script type="text/x-template" id="modal-template">
        <transition name="modal">
            <div class="modal-wrapper">
                <h1>jules is the best</h1>
                <button class="modal-btn" @click="$emit('close')">OK</button>
            </div>
        </transition>
    </script>

    <!-- //add to data main view instance currentImage and falsey. click handle to all images to
    set the currentImage to truthy img. should be id info. pass prop(only pass id, not *) and mount(take id thats passed - this.id and make ajax request) to specify which image.
    when modal appears all data about img and all comments.
    one route that getImagebyID query and comments query. Make two ajax routs(image data and comments separatly**better or one route that does both)
    when modal sets the data on itself you need to add it to prop.
    making comments: normal ajax: when user clicks submit use v-modal, post is just a normal post, there is no formData (only for
    uploading the file) axios.post('/comment', { pass normal body imageId:this.id, comment: this.comment, username: this.commentUsername})
    axios is going to json.stringyfy - type of data sending is not url encoded it's json:
    app.use(require bodyparser.urlencoded can be deleted). insetad use .json instead of urlencoded.
    send the comment back, add it to the array.
    making the modal go away:
    modal covers the whole screen. close click handler added to image modal with @close, in prop set to 0 - falsey.
    ***start by making modal component, putting a template for it and css, click handler to images to make modal appear, id to get the right
    stuff in a modal, and close the modal-->

    <script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
    <script src="/js/modal.js"></script>
    <script src="/js/script.js"></script>
</body>
</html>
